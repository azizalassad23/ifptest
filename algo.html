<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALGO // REORDER</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        :root { --bg: #09090b; --green: #00ff9d; --red: #ff0055; --panel-bg: #18181b; }
        
        body {
            font-family: 'JetBrains Mono', monospace; 
            background: var(--bg); 
            color: #e4e4e7;
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh;
        }

        .header { 
            width: 100%; 
            max-width: 1000px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 20px; 
            border-bottom: 1px solid #333; 
            padding-bottom: 10px; 
        }
        
        .back-btn { 
            text-decoration: none; 
            color: #666; 
            border: 1px solid #444; 
            padding: 5px 15px; 
            border-radius: 4px; 
            transition: 0.3s;
        }
        .back-btn:hover { color: #fff; border-color: #fff; }
        
        /* Layout Container */
        .container { 
            display: flex; 
            gap: 20px; 
            width: 100%; 
            max-width: 1000px; 
            height: 60vh; /* Tinggi tetap agar scroll berfungsi */
        }
        
        .panel { 
            flex: 1; 
            background: var(--panel-bg); 
            border: 1px solid #333; 
            border-radius: 8px; 
            padding: 15px; 
            display: flex;
            flex-direction: column;
        }
        
        .panel h3 { 
            margin-top: 0; 
            color: var(--green); 
            border-bottom: 1px solid #333; 
            padding-bottom: 10px; 
            margin-bottom: 10px;
        }
        
        /* --- PERBAIKAN PENTING DI SINI --- */
        /* Kita harus memastikan #source dan #target punya tinggi meski kosong */
        #source, #target {
            flex: 1; /* Mengisi sisa ruang panel */
            min-height: 100px; /* Jaga-jaga agar tidak 0px */
            overflow-y: auto; /* Scroll jika konten panjang */
            padding-bottom: 50px; /* Ruang ekstra di bawah untuk kemudahan drop */
        }
        
        /* Style Blok Kode */
        .code-block { 
            background: #27272a; 
            border: 1px solid #3f3f46; 
            color: var(--green); 
            padding: 15px; 
            margin-bottom: 10px; 
            cursor: grab; 
            border-radius: 4px; 
            font-size: 1.1rem;
            /* Mencegah teks bisa diblok saat drag */
            user-select: none; 
        }
        
        .code-block:active { 
            cursor: grabbing; 
            transform: scale(0.98); 
            border-color: var(--green);
        }

        /* Visual saat item didrag di atas target */
        .sortable-ghost {
            opacity: 0.4;
            background-color: #333;
            border: 1px dashed var(--green);
        }
        
        #checkBtn { 
            margin-top: 20px; 
            background: transparent; 
            border: 2px solid var(--green); 
            color: var(--green); 
            padding: 15px 50px; 
            font-family: inherit; 
            font-size: 1.2rem; 
            font-weight: bold;
            cursor: pointer; 
            transition: 0.3s; 
        }
        
        #checkBtn:hover { 
            background: var(--green); 
            color: #000; 
            box-shadow: 0 0 20px rgba(0, 255, 157, 0.4);
        }
        
        #status { margin-top: 15px; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ALGO_REORDER</h1>
        <a href="index.html" class="back-btn">EXIT</a>
    </div>

    <div class="container">
        <div class="panel">
            <h3>SOURCE_BUFFER</h3>
            <div id="source"></div>
        </div>
        
        <div class="panel" id="targetPanel">
            <h3>EXECUTION_STACK</h3>
            <div id="target"></div>
        </div>
    </div>

    <button id="checkBtn" onclick="check()">COMPILE & RUN</button>
    <div id="status"></div>

    <script>
        // --- DATA SOAL ---
        const correct = [
            "total = 0",
            "angka = [10, 20, 30]",
            "for x in angka:",
            "total = total + x",
            "print(total)"
        ];

        // Init Data
        const src = document.getElementById('source');
        let items = [...correct].sort(() => Math.random() - 0.5);
        
        items.forEach(t => {
            let d = document.createElement('div');
            d.className = 'code-block'; 
            d.innerText = t; 
            src.appendChild(d);
        });

        // --- KONFIGURASI DRAG & DROP ---
        // Group 'shared' memungkinkan perpindahan antar list
        new Sortable(document.getElementById('source'), { 
            group: 'shared', 
            animation: 150,
            ghostClass: 'sortable-ghost'
        });
        
        new Sortable(document.getElementById('target'), { 
            group: 'shared', 
            animation: 150,
            ghostClass: 'sortable-ghost'
        });

        // --- CEK JAWABAN ---
        function check() {
            const userBlocks = document.querySelectorAll('#target .code-block');
            const panel = document.getElementById('targetPanel');
            const stat = document.getElementById('status');
            
            // Validasi Jumlah
            if(userBlocks.length !== correct.length) {
                stat.innerHTML = "<span style='color:#ffaa00'>⚠️ INCOMPLETE CODE: Move all blocks to right!</span>"; 
                return;
            }
            
            // Validasi Urutan
            let ok = true;
            userBlocks.forEach((el, i) => { 
                if(el.innerText !== correct[i]) ok = false; 
            });

            if(ok) {
                stat.innerHTML = "<span style='color:#00ff9d'>✅ SYSTEM SECURE. OUTPUT: 60</span>";
                panel.style.borderColor = "#00ff9d";
                panel.style.boxShadow = "0 0 20px rgba(0, 255, 157, 0.2)";
            } else {
                stat.innerHTML = "<span style='color:#ff0055'>❌ SYNTAX ERROR: Wrong Order</span>";
                panel.style.borderColor = "#ff0055";
                
                // Efek getar
                panel.animate([
                    { transform: 'translateX(0)' }, 
                    { transform: 'translateX(-5px)' }, 
                    { transform: 'translateX(5px)' }, 
                    { transform: 'translateX(0)' }
                ], { duration: 300 });
            }
        }
    </script>
</body>
</html>