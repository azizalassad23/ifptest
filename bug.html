<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUG // HUNTER</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #09090b; --purple: #bd00ff; --red: #ff0055; --green: #00ff9d; }
        body { font-family: 'JetBrains Mono', monospace; background: var(--bg); color: #fff; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .header { width: 100%; max-width: 800px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--purple); padding-bottom: 10px; margin-bottom: 30px; }
        h1 { margin: 0; color: var(--purple); }
        .back-btn { text-decoration: none; color: #888; border: 1px solid #444; padding: 5px 15px; border-radius: 4px; }
        .console { background: #18181b; padding: 20px; border-radius: 8px; width: 100%; max-width: 800px; border: 1px solid #333; position: relative; margin-bottom: 20px; }
        .console::before { content: "main.py"; position: absolute; top: -10px; left: 20px; background: var(--purple); font-size: 0.8rem; padding: 2px 8px; font-weight: bold; color: #fff; }
        .line { padding: 15px; border-bottom: 1px solid #27272a; cursor: pointer; display: flex; font-size: 1.2rem; transition: 0.2s; }
        .line:hover { background: #27272a; }
        .num { color: #555; margin-right: 15px; width: 30px; user-select: none; }
        .code { color: #d4d4d4; white-space: pre; }
        .wrong { background: rgba(0, 255, 157, 0.1) !important; border-left: 4px solid var(--green); }
        .correct { background: rgba(255, 0, 85, 0.2) !important; border-left: 4px solid var(--red); text-decoration: line-through; }
        #msg { height: 30px; font-size: 1.2rem; font-weight: bold; text-align: center; margin-bottom: 10px; }
        #progress { color: #888; margin-bottom: 15px; }
        #nextBtn, #restartBtn { background: var(--purple); color: #fff; border: none; padding: 10px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; font-size: 1.1rem; display: none; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>BUG_HUNTER</h1>
        <a href="index.html" class="back-btn">EXIT</a>
    </div>
    <div id="progress">LOADING...</div>
    <p>TAP BARIS YANG MEMILIKI ERROR (SYNTAX ERROR)</p>

    <div class="console" id="editor"></div>
    <div id="msg"></div>
    <button id="nextBtn" onclick="nextQuestion()">DEBUG SELESAI > NEXT</button>
    <button id="restartBtn" onclick="initGame()">MAIN LAGI</button>

    <script>
        // --- DATA BANK SOAL ---
        // Format: lines (array code), errorIdx (baris ke berapa yg salah, mulai dari 0), hint (pesan error)
        const bugBank = [
            { lines: ["def check_score(score):", "    if score >= 75:", "        print('Lulus')", "    else", "        print('Remedial')"], errorIdx: 3, hint: "Missing ':' after else" },
            { lines: ["x = 10", "if x = 10:", "    print('Sepuluh')"], errorIdx: 1, hint: "Use '==' for comparison, not '='" },
            { lines: ["print('Hello World')", "print('Selamat Pagi'", "print('Python Asik')"], errorIdx: 1, hint: "Missing closing parenthesis ')'" },
            { lines: ["for i in range(5):", "print(i)", "    print('Looping')"], errorIdx: 1, hint: "Indentation Error! Expected indent." },
            { lines: ["angka = [1, 2, 3]", "print(angka[3])", "print('Selesai')"], errorIdx: 1, hint: "IndexError: List index out of range (max index is 2)" },
            { lines: ["nama = 'Budi'", "prnt(nama)", "umur = 17"], errorIdx: 1, hint: "NameError: 'prnt' is not defined. Did you mean 'print'?" },
            { lines: ["while True", "    print('Forever')", "    break"], errorIdx: 0, hint: "Missing ':' after condition" },
            { lines: ["x = 10", "y = '5'", "z = x + y"], errorIdx: 2, hint: "TypeError: unsupported operand type(s) for +: 'int' and 'str'" },
            { lines: ["def sapa()", "    print('Halo')", "sapa()"], errorIdx: 0, hint: "Missing ':' after function definition" },
            { lines: ["import math", "print(math.PI)"], errorIdx: 1, hint: "AttributeError: module 'math' has no attribute 'PI'. Try 'pi' (lowercase)." }
        ];

        let currentBugs = [];
        let currentIndex = 0;
        let solved = false;

        function initGame() {
            // Pick 5 random questions
            currentBugs = [...bugBank].sort(() => Math.random() - 0.5).slice(0, 5);
            currentIndex = 0;
            loadBug();
            document.getElementById('restartBtn').style.display = 'none';
        }

        function loadBug() {
            solved = false;
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('msg').innerText = "";
            document.getElementById('progress').innerText = `KASUS ${currentIndex + 1} / 5`;

            const q = currentBugs[currentIndex];
            const editor = document.getElementById('editor');
            editor.innerHTML = ""; // Clear old lines

            q.lines.forEach((txt, i) => {
                let div = document.createElement('div');
                div.className = 'line';
                div.innerHTML = `<span class="num">${i+1}</span><span class="code">${txt}</span>`;
                div.onclick = () => checkLine(div, i, q.errorIdx, q.hint);
                editor.appendChild(div);
            });
        }

        function checkLine(element, index, correctIndex, hint) {
            if (solved) return; // Prevent clicking after solved

            const msg = document.getElementById('msg');
            
            if (index === correctIndex) {
                element.classList.add('correct');
                msg.innerHTML = `<span style='color:var(--green)'>âœ… BUG CAUGHT! ${hint}</span>`;
                solved = true;
                
                if (currentIndex < 4) {
                    document.getElementById('nextBtn').style.display = 'inline-block';
                } else {
                    document.getElementById('restartBtn').style.display = 'inline-block';
                    msg.innerHTML += "<br>ðŸŽ‰ SEMUA BUG DIPERBAIKI!";
                }
            } else {
                element.classList.add('wrong');
                msg.innerHTML = "<span style='color:var(--red)'>KODE BERSIH. Cari baris lain!</span>";
                setTimeout(() => element.classList.remove('wrong'), 800);
            }
        }

        function nextQuestion() {
            currentIndex++;
            loadBug();
        }

        initGame();
    </script>
</body>
</html>
